<!DOCTYPE html>
<head>
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="frontend_kpuzzle.js?20200913"></script>
<script src="automaker.js?20250831"></script>
<script src="logger.js?20250926"></script>
<link rel="stylesheet" type="text/css" href="bushubu.css" />
<title>部首パズル</title>
<style>
  body {
      overflow:hidden;
  }
  #main {
      display: flex;
      flex-direction: column;
      width:100vw;
      height:100vh;
  }
  #title .correct, h2.sampleword .correct {
      color: rgba(170,90,40,.8);
      text-shadow: -1px -1px 2px #522, 1px 1px 1px #c77;
  }
  #title {
      height:50vh;
      width:100%;
      text-align:center;
      min-width:360px;
  }
  #title .glyph.hiragana {zoom:1.7; }
  #title .glyph { zoom:2.5; }

  h2.sampleword .correct {
      color: rgba(100,40,20,.8);
  }
  h2.sampleword .glyph.hiragana { zoom: 0.8; }
  #menu {
      display:flex; flex-wrap:wrap;height:100vh;
      background-image:url(p0499_m.jpg);
      background-color:rgba(0,80,0,.8);
      background-blend-mode:multiply;
  }
  #head {
      min-width:300px; width:100%;z-index:2;
      height:40px; overflow:hidden;
      background-image:url(p0499_m.jpg);
      background-color:rgba(0,80,0,.8);
      background-blend-mode:multiply;
  }
  #quiz {
      flex: 1;
      min-height: 100px;
  }
  #quiz.scroll {
      padding-top:30px;
      overflow:hidden scroll;
  }
  #quiz.nowid .wid, #menu .wid, #howto .wid {
      font-size:0px;
  }
  #hint {
      border:3px #156 dotted;position:fixed;
      background:rgba(128,128,128,.8);
      display:none;
      z-index:5;bottom:0;right:0;zoom:.64;
      pointer-events:none;
      max-height:30vh;
      overflow:hidden;
  }
  #overlap {
      opacity:.9;
      overflow:hidden auto;
      position:absolute; text-align:center; bottom:0; left:0; right:0; top:0;
      background-color: rgba(0,0,0,0.5);
      margin:auto; border:2px solid gray;
      padding-top:40px;
      display:flex;
      z-index:4;
  }
  .withheld {
      opacity:.5;
  }
  .menu {
      text-align:center;
      width:100%;
  }
  button.gonext, button.replay, button.submit {
      cursor:pointer;
      width:200px;font-size:20px; height:50px;
      background-image:url(p0499_m.jpg);
  }
  button.userrecord {
      width:150px;height:30px;background-image:url(p0499_m.jpg);
      cursor:pointer;
  }
  #status {
      position:absolute;
      right:25px;
      color:white; font-size:15px;
  }
  #status .pointtype {
      display:inline-block; line-height:14px;text-align:center;
  }
  #point, #bonus, .tpoint {
      font-size:20px;
  }
  .showrule {
      height:25px;width:25px;overflow:hidden;margin:0 0 0 auto;
  }
  #greet {
      text-shadow:0 0 5px #3cc;
      color: #008;
      font-weight: bold;
  }
</style>
</head>

<body>
  <div id="menu">
    <button class="help showrule">&#x2753;</button><!--&#x2699;&#xFe0F;-->
    <div id="title" class="sampleword">部首パズル</div>
    <div class="menu sampleword" id="newstart">新規開始</div>
    <div class="menu sampleword" id="continue">継続開始</div>
    <div class="menu sampleword" id="archives">問題集</div>
    <div class="menu sampleword" id="resume">中断再開</div>
  </div>
  <div id="main">
    <div id="head">
      <h2 class="sampleword" style="cursor:pointer; display:inline-block;">部首パズル</h2>
      <button class="showrule help" style="">&#x2753;</button>
      <span id="status">
        <span class="pointtype"><span style="font-size:10px;">素点</span><br/><span id="point">0</span></span> +
        <span class="pointtype"><span style="font-size:10px;">タイムボーナス</span><br/><span id="bonus">0</span>
          (&#x23f0;<span id="time">0</span></span>)
        <span id="score">= <span class="tpoint"></span>点</span>
      </span>
      <input id="g_log" style="display:none;"/>
      <div style="float:right;">
        <span id="discover"></span>
        <span id="knjdef"></span>
      </div>
    </div>
    <div id="hint"></div>
    <div id="keyinput" class="keyinput" style="z-index:3;">
      <input class="userans" enterkeyhint="done"  style="z-index:3;" placeholder="漢字を入力" />
      <div id="judge"></div>
    </div>
    <div id="quiz"></div>
  </div>
  <div id="overlap" style="display:none;">
    <div id="qlists" style="width:250px; padding:30px; position:relative; overflow:hidden auto; margin:auto; height:50vh;background-image:url(p0499_m.jpg)">
    </div>
    <div id="control" style="position:relative;">
      <button class="closer">X</button>
      <div class="topbox helper" style="background-color:#bcc; top:0px; padding:20px;">
        <button class="gonext">トップに戻る</button>
        <br/>
        <button class="replay">リプレイを見る</button>
        <br/>
        <button class="gonext">次の問題へ</button>
      </div>
    </div>
    <div id="message"  style="display: block; display:flex; flex-direction:column; border-radius: 40px; height: 200px; overflow: hidden;">
      <div style="flex-grow:1; font-size:15pt; display: flex;  justify-content: center;  align-items: center;">
        <div id="greet">Greetings</div></div>
      <div style="text-align: center; font-size: 12pt; width: 100%; height: 110px;">
        名前:<input style="width:200px; font-size:15pt; background-color:#010; color: #8c8; font-family:monospace;" enterkeyhint="done"><br />
        <span class="tpoint"></span>点<br />
        <button class="submit">記録(Enter)</button>
      </div>
    </div>
    <div style="margin:auto; margin-right:10px; margin-top:10px; position:relative;display:flex; flex-wrap:wrap;" id="howto">
      <button class="closer">X</button>
      <div class="topbox helper" style="background-color:#bcc;" id="rule">
      <h4>●例題</h4>
      同じ数字のところに同じ漢字パーツが入って熟語が完成します。
      <div id='qex'>
        <div class="sampleword qex" style="display:inline-block;">落葉樹</div>
        →
        <div class="sampleword qex" style="display:inline-block;">落葉樹</div>
      </div>
      盤面をクリックして黄色く光るマスの漢字を入力してください。<br/>(まとめて「葉樹」とも打てます)
      <div id='qex2' style="padding-top:15px;position:relative;">
        <input class="helpuserans" disabled style="position:absolute; top:0px; left:75px; width:120px;"/>
        <div id="example2" class="sampleword qex">落葉樹</div>
      </div>
      わからないときは「?」入力でヒントが出るかもしれません。
      <div style="text-align:center;display:none;" id="q1st">
        <button class="submit">パズル開始</button>
      </div>
    </div>
    <div class="topbox helper" style="background-color:#bcc;" id="config">
      <h4>●設定</h4><br/>
      <label><input type="checkbox" id="onse" checked />SE</label><br/>
      <label><input type="checkbox" id="onwid" />語番号表示</label> <br/>
      <label>サイズ自動調整:
        <select id="zoomer">
          <option>-4</option><option>-3</option><option>-2</option><option>-1</option>
          <option selected>0</option>
          <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
        </select>
      </label><br/>
      これまでの記録:<br/>
      <button class="userrecord" id="dlrec">ダウンロードする</button><br/>
      <button class="userrecord" id="makeuprec">全問解禁する</button><br/>
      <button class="userrecord" id="rmrec">削除する</button>
    </div>

    </div>
  </div>
</div>
<div style="display:none;">
  <iframe src="fragtable.txt" id="fragtable"></iframe>
  <iframe src="fragtable.plus.txt" id="fragtablep"></iframe>
  <a href="https://script.google.com/macros/s/AKfycbx65oBGA7GbPsxMzM18DEpM3W2PpLMrJJHDujtv/exec" id="gasapi">GAS</a>
</div>
</body>
</html>
